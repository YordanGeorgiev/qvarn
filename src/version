#!/usr/bin/env python2
#
# src/version - implement the /version resource
#
# Copyright 2015 Suomen Tilaajavastuu Oy
# All rights reserved.


import qvarn


def version():
    return {
        'api': {
            'version': '1.0',
        },
        'implementation': {
            'version': 'see git',
            'name': 'unified-api-backend',
        },
    }


def setup():
    app = qvarn.BackendApplication()

    vs = qvarn.VersionedStorage()
    vs.set_resource_type(u'version')
    app.set_versioned_storage(vs)

    resource = qvarn.SimpleResource()
    resource.set_path(u'/version', version)
    app.add_resource(resource)

    return app.prepare_for_uwsgi()


application = setup()
